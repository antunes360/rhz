"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_assets_modules_github_virtual-listbox-focus-state_ts-node_modules_github_template-parts_l-448df2"],{95141:(t,e,s)=>{function i(t,e){if(e.has(t))throw TypeError("Cannot initialize the same private elements twice on an object")}function n(t,e){return e.get?e.get.call(t):e.value}function o(t,e,s){if(e.set)e.set.call(t,s);else{if(!e.writable)throw TypeError("attempted to set read only private field");e.value=s}}function r(t,e,s){if(!e.has(t))throw TypeError("attempted to "+s+" private field on non-instance");return e.get(t)}function a(t,e){var s=r(t,e,"get");return n(t,s)}function h(t,e,s){i(t,e),e.set(t,s)}function l(t,e,s){var i=r(t,e,"set");return o(t,i,s),s}s.d(e,{Z:()=>g}),function(t){t[t.Moved=0]="Moved",t[t.Committed=1]="Committed"}(u||(u={}));var u,c=new WeakMap,d=new WeakMap,p=new WeakMap,f=new WeakMap,m=new WeakMap,v=new WeakMap,b=new WeakMap;let g=class VirtualListboxFocusState{isFocused(){return a(this,m)}updateItems(){l(this,d,Array.from(a(this,c).values())),this.isFocused()&&!this.isExistingItemFocused()&&this.focusFirst()}focusFirst(){this.defocusCurrentElement(),l(this,v,0),l(this,p,a(this,d)[0])}focusLast(){this.defocusCurrentElement(),l(this,v,0),l(this,p,a(this,d)[a(this,d).length-1])}focusNext(){let t;if(a(this,p)){let e=a(this,d).indexOf(a(this,p));t=e===a(this,d).length-1?a(this,d)[e]:a(this,d)[e+1]}else t=a(this,d)[0];this.defocusCurrentElement(),l(this,v,0),l(this,p,t)}focusPrev(){let t;if(a(this,p)){let e=a(this,d).indexOf(a(this,p));t=0===e?a(this,d)[0]:-1===e?a(this,d)[0]:a(this,d)[e-1]}else t=a(this,d)[0];this.defocusCurrentElement(),l(this,v,0),l(this,p,t)}focusIndex(t){this.defocusCurrentElement(),t>-1&&t<a(this,d).length?l(this,p,a(this,d)[t]):this.resetFocus(),l(this,v,0)}captureFocus(){this.markRootAsFocused(),document.activeElement!==a(this,c)&&a(this,c).focus(),this.isExistingItemFocused()||this.focusFirst(),a(this,c).addEventListener("focusout",a(this,b))}releaseFocus(){this.markRootAsNotFocused(),a(this,c).removeEventListener("focusout",a(this,b))}resetFocus(){l(this,f,void 0),l(this,p,void 0),this.defocusCurrentElement(),this.commitFocus()}captureFocusElement(t){if(!a(this,p))return;let e=t.get(a(this,p));if(e){let t=e.querySelector("[tabindex]");this.setFocusElement(t)}}restoreFocus(){this.isFocused()&&(this.captureFocus(),this.commitFocus())}setFocusElement(t){l(this,f,t)}handleKeydown(t){if(t instanceof KeyboardEvent)switch(t.key){case"ArrowDown":this.isFocused()&&(this.focusNext(),a(this,c).update()),t.preventDefault(),t.stopPropagation();break;case"ArrowUp":this.isFocused()&&(this.focusPrev(),a(this,c).update()),t.preventDefault(),t.stopPropagation();break;case"Home":this.isFocused()&&(this.focusFirst(),a(this,c).update());break;case"End":this.isFocused()&&(this.focusLast(),a(this,c).update())}}handleClick(t){let e=t.target;if(a(this,c).list.contains(e)){let t=e.closest("[tabindex]"),s=parseInt(e.closest("[aria-posinset]")?.getAttribute("aria-posinset")||"");if(!t||isNaN(s))return;l(this,f,t),this.focusIndex(s-1),a(this,c).update(),this.captureFocus()}}handleRenderFocus(t){this.captureFocusElement(t.rowsCache),this.restoreFocus()}handleFocusChange(t){this.focusIndex(t.index)}markRootAsNotFocused(){l(this,m,!1)}markRootAsFocused(){l(this,m,!0)}isExistingItemFocused(){return a(this,p)&&a(this,d).indexOf(a(this,p))>-1}commitFocus(){this.forceFocusOnElement(),a(this,f)&&(this.updateScrollPosition(),l(this,v,1),a(this,c).setAttribute("aria-activedescendant",a(this,f).id))}forceFocusOnElement(){for(let t of a(this,c).querySelectorAll("[tabindex]"))t.classList.remove("focused");let t=a(this,f);t&&t.classList.add("focused")}defocusCurrentElement(){let t=a(this,f);t&&(t.classList.remove("focused"),l(this,f,void 0))}updateScrollPosition(){if(!a(this,p)||!a(this,f)||1===a(this,v))return;let t=a(this,f),e=a(this,c);this.isItemDetached()?this.scrollIntoView():this.isItemHiddenByTopBorder()?e.scrollTop=t.offsetTop:this.isItemHiddenByBottomBorder()&&(e.scrollTop=t.offsetTop+t.offsetHeight-e.clientHeight)}scrollIntoView(){if(!a(this,f))return;let t=parseInt(a(this,f).getAttribute("data-scrolltop")||"");isNaN(t)||(a(this,c).scrollTop=t)}isItemHiddenByTopBorder(){return!!(a(this,f)&&a(this,c))&&a(this,f).offsetTop<a(this,c).scrollTop}isItemHiddenByBottomBorder(){let t=a(this,c),e=a(this,f);if(!e||!t)return!1;let s=t.scrollTop+t.clientHeight,i=e.offsetTop+e.offsetHeight;return i>s}isItemDetached(){return!!a(this,f)&&!a(this,f).offsetParent}constructor(t){h(this,c,{writable:!0,value:void 0}),h(this,d,{writable:!0,value:void 0}),h(this,p,{writable:!0,value:void 0}),h(this,f,{writable:!0,value:void 0}),h(this,m,{writable:!0,value:!1}),h(this,v,{writable:!0,value:void 0}),h(this,b,{writable:!0,value:void 0}),l(this,c,t),l(this,d,Array.from(t.values())),l(this,b,this.releaseFocus.bind(this)),a(this,c).addEventListener("focus",()=>{this.isExistingItemFocused()?this.captureFocus():(this.captureFocus(),a(this,c).update())}),a(this,c).addEventListener("virtual-list-rendered",t=>this.handleRenderFocus(t)),a(this,c).addEventListener("virtual-list-data-updated",()=>this.updateItems()),a(this,c).addEventListener("virtual-list-activedescendant-changed",t=>this.handleFocusChange(t)),a(this,c).addEventListener("keydown",t=>this.handleKeydown(t)),a(this,c).addEventListener("click",t=>this.handleClick(t))}}},69567:(t,e,s)=>{function*i(t){let e="",s=0,i=!1;for(let n=0;n<t.length;n+=1)"{"!==t[n]||"{"!==t[n+1]||"\\"===t[n-1]||i?"}"===t[n]&&"}"===t[n+1]&&"\\"!==t[n-1]&&i&&(i=!1,yield{type:"part",start:s,end:n+2,value:e.slice(2).trim()},e="",n+=2,s=n):(i=!0,e&&(yield{type:"string",start:s,end:n,value:e}),e="{{",s=n,n+=2),e+=t[n]||"";e&&(yield{type:"string",start:s,end:t.length,value:e})}s.d(e,{R:()=>TemplateInstance,XK:()=>b});var n,o,r,a,h,l=function(t,e,s){if(!e.has(t))throw TypeError("attempted to set private field on non-instance");return e.set(t,s),s},u=function(t,e){if(!e.has(t))throw TypeError("attempted to get private field on non-instance");return e.get(t)};let AttributeTemplatePart=class AttributeTemplatePart{constructor(t,e){this.expression=e,n.set(this,void 0),o.set(this,""),l(this,n,t),u(this,n).updateParent("")}get attributeName(){return u(this,n).attr.name}get attributeNamespace(){return u(this,n).attr.namespaceURI}get value(){return u(this,o)}set value(t){l(this,o,t||""),u(this,n).updateParent(t)}get element(){return u(this,n).element}get booleanValue(){return u(this,n).booleanValue}set booleanValue(t){u(this,n).booleanValue=t}};n=new WeakMap,o=new WeakMap;let AttributeValueSetter=class AttributeValueSetter{constructor(t,e){this.element=t,this.attr=e,this.partList=[]}get booleanValue(){return this.element.hasAttributeNS(this.attr.namespaceURI,this.attr.name)}set booleanValue(t){if(1!==this.partList.length)throw new DOMException("Operation not supported","NotSupportedError");this.partList[0].value=t?"":null}append(t){this.partList.push(t)}updateParent(t){if(1===this.partList.length&&null===t)this.element.removeAttributeNS(this.attr.namespaceURI,this.attr.name);else{let t=this.partList.map(t=>"string"==typeof t?t:t.value).join("");this.element.setAttributeNS(this.attr.namespaceURI,this.attr.name,t)}}};var c=function(t,e,s){if(!e.has(t))throw TypeError("attempted to set private field on non-instance");return e.set(t,s),s},d=function(t,e){if(!e.has(t))throw TypeError("attempted to get private field on non-instance");return e.get(t)};let NodeTemplatePart=class NodeTemplatePart{constructor(t,e){this.expression=e,r.set(this,void 0),c(this,r,[t]),t.textContent=""}get value(){return d(this,r).map(t=>t.textContent).join("")}set value(t){this.replace(t)}get previousSibling(){return d(this,r)[0].previousSibling}get nextSibling(){return d(this,r)[d(this,r).length-1].nextSibling}replace(...t){let e=t.map(t=>"string"==typeof t?new Text(t):t);for(let t of(e.length||e.push(new Text("")),d(this,r)[0].before(...e),d(this,r)))t.remove();c(this,r,e)}};function p(t){return{createCallback(t,e,s){this.processCallback(t,e,s)},processCallback(e,s,i){var n;if("object"==typeof i&&i){for(let e of s)if(e.expression in i){let s=null!==(n=i[e.expression])&&void 0!==n?n:"";t(e,s)}}}}}function f(t,e){t.value=String(e)}function m(t,e){return"boolean"==typeof e&&t instanceof AttributeTemplatePart&&"boolean"==typeof t.element[t.attributeName]&&(t.booleanValue=e,!0)}r=new WeakMap;let v=p(f),b=p((t,e)=>{m(t,e)||f(t,e)});var g=function(t,e,s){if(!e.has(t))throw TypeError("attempted to set private field on non-instance");return e.set(t,s),s},w=function(t,e){if(!e.has(t))throw TypeError("attempted to get private field on non-instance");return e.get(t)};function*F(t){let e;let s=t.ownerDocument.createTreeWalker(t,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT,null,!1);for(;e=s.nextNode();)if(e instanceof Element&&e.hasAttributes())for(let t=0;t<e.attributes.length;t+=1){let s=e.attributes.item(t);if(s&&s.value.includes("{{")){let t=new AttributeValueSetter(e,s);for(let e of i(s.value))if("string"===e.type)t.append(e.value);else{let s=new AttributeTemplatePart(t,e.value);t.append(s),yield s}}}else if(e instanceof Text&&e.textContent&&e.textContent.includes("{{"))for(let t of i(e.textContent)){t.end<e.textContent.length&&e.splitText(t.end),"part"===t.type&&(yield new NodeTemplatePart(e,t.value));break}}let TemplateInstance=class TemplateInstance extends DocumentFragment{constructor(t,e,s=v){var i,n;super(),a.set(this,void 0),h.set(this,void 0),Object.getPrototypeOf(this!==TemplateInstance.prototype)&&Object.setPrototypeOf(this,TemplateInstance.prototype),this.appendChild(t.content.cloneNode(!0)),g(this,h,Array.from(F(this))),g(this,a,s),null===(n=(i=w(this,a)).createCallback)||void 0===n||n.call(i,this,w(this,h),e)}update(t){w(this,a).processCallback(this,w(this,h),t)}};a=new WeakMap,h=new WeakMap}}]);
//# sourceMappingURL=app_assets_modules_github_virtual-listbox-focus-state_ts-node_modules_github_template-parts_l-448df2-946dcf05c0a4.js.map